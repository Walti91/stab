<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/graduationDates/layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
	<!--
	Copyright (C) 2016  Florian Waltenberger

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
 	 -->
    <ui:param name="commissionsActive" value="ui-tabs-selected ui-state-active" />
	<ui:define name="furtherContent">
		<h:form id="graduationDatesCommissionsForm">
			<div id="commissionsBlock">
				<div id="leftBlock">
					<c:forEach items="#{graduationDate.commissions}" var="commission">
						<fieldset class="nonStyledFieldset">
							<legend>#{messages['labelCommission']}</legend>
							<ol>
								<li>
									<h:outputLabel for="commission#{commission.id}date">#{messages['labelDate']}</h:outputLabel>
									<h:outputText id="commission#{commission.id}date" name="commission#{commission.id}date" value="#{commission.date}">
										<f:convertDateTime pattern="#{messages['dateFormat']}" />
									</h:outputText>
								</li>
								<li>
									<h:outputLabel for="commission#{commission.id}from">#{messages['labelFrom']}</h:outputLabel>
									<h:outputText id="commission#{commission.id}from" name="commission#{commission.id}from" value="#{commission.from}">
										<f:convertDateTime pattern="#{messages['timeFormat']}" />
									</h:outputText>
								</li>
								<li>
									<h:outputLabel for="commission#{commission.id}to">#{messages['labelTo']}</h:outputLabel>
									<h:outputText id="commission#{commission.id}to" name="commission#{commission.id}to" value="#{commission.to}">
										<f:convertDateTime pattern="#{messages['timeFormat']}" />
									</h:outputText>
								</li>
								<li>
									<h:outputLabel for="commission#{commission.id}room">#{messages['labelRoom']}</h:outputLabel>
									<h:outputText id="commission#{commission.id}room" name="commission#{commission.id}room" value="#{commission.room}" />
								</li>
								<li>
									<h:outputLabel for="commission#{commission.id}chairman">#{messages['labelChairman']}</h:outputLabel>
									<h:outputText id="commission#{commission.id}chairman" name="commission#{commission.id}chairman" value="#{commission.chairman}" />
								</li>
								<li>
									<h:outputLabel for="commission#{commission.id}student">#{messages['labelStudent']}</h:outputLabel>
									<h:inputText id="commission#{commission.id}student" name="commission#{commission.id}student" value="#{commission.enrollment.student}" disabled="true" class="largeInput" />
									<h:commandButton id="assignEnrollment#{commission.id}" name="assignEnrollment#{commission.id}" value="&lt;&lt;" action="#{gdCommissions.assignEnrollment(commission.id)}">
							        	<f:ajax execute="unassignedEnrollments" render="commission#{commission.id}student unassignedEnrollments" />
								    </h:commandButton>
								    <h:commandButton id="unassignEnrollment#{commission.id}" name="unassignEnrollment#{commission.id}" value="&gt;&gt;" action="#{gdCommissions.unassignEnrollment(commission.id)}">
								        <f:ajax execute="commission#{commission.id}student" render="commission#{commission.id}student unassignedEnrollments" />
								    </h:commandButton>
								</li>
								<li>
									<h:commandButton id="deleteCommission#{commission.id}" name="deleteCommission#{commission.id}" value="#{messages['labelDelete']}" action="#{gdCommissions.deleteCommission(commission.id)}">
										<f:ajax execute="@this" render="@form" />
									</h:commandButton>
								</li>
							</ol>
						</fieldset>
					</c:forEach>
					<h:button id="createCommission" name="createCommission" value="#{messages['labelCreateCommission']}" outcome="/graduationDates/createCommission" />
				</div>
				<div id="rightBlock">
					<h:outputLabel for="unassignedEnrollments">#{messages['labelUnassignedEnrollments']}</h:outputLabel>
		        	<h:selectOneListbox id="unassignedEnrollments" name="unassignedEnrollments" value="#{gdCommissions.selectedEnrollment}" size="20">
		            	<f:selectItems value="#{gdCommissions.unassignedEnrollments}" var="enrollment" itemLabel="#{enrollment.student}" itemValue="#{enrollment.id}" />
		         	</h:selectOneListbox>
		      	</div>
			</div>
		</h:form>
	</ui:define>
</ui:composition>